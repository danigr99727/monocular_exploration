<launch>

    <!-- Set this to your camera's name -->
    <arg name="cam_name" value="s20cam_wide" />


    <!-- Start the GSCAM node -->
    <env name="GSCAM_CONFIG" value="rtspsrc location=rtsp://192.168.1.99:5554/playlist.m3u latency=100  ! typefind ! rtph264depay ! h264parse ! avdec_h264 ! videoconvert" />
    <node pkg="gscam" type="gscam" name="$(arg cam_name)">
        <param name="camera_name" value="$(arg cam_name)" />
        <param name="camera_info_url" value="package://my_pipeline/calibration/ost_wide.yaml" />
        <param name="frame_id" value="$(arg cam_name)" />
        <remap from="camera/image_raw" to="/$(arg cam_name)/image_raw" />
    </node>

  <!-- Provide rectification -->
  <node pkg="image_proc" type="image_proc" name="creative_image_proc"
        ns="$(arg cam_name)" />

 <node pkg="rosbag" type="record" name="rosbag_record_cam"
       args="record -o /$(arg cam_name)/image_raw /$(arg cam_name)/image_rect
       /$(arg cam_name)/image_rect_color
       /$(arg cam_name)/image_mono
       /$(arg cam_name)/image_color
       /$(arg cam_name)/camera_info -O Camera.bag"
    />

</launch>
